{% extends 'base.html' %}
{% load static %}

{% block title %}
    {% if colaborador %}Editar Colaborador{% else %}Cadastrar Colaborador{% endif %}
{% endblock %}

{% block content %}
    
    <div class="page-header">
        <h1>{% if colaborador %}Editar Colaborador{% else %}Cadastrar Colaborador{% endif %}</h1>
        
        <a href="{% url 'index' %}" class="btn-submit btn-back">
            <svg class="icon"><use href="#icon-arrow-left"></use></svg>
            Voltar para Lista
        </a>
    </div>

    <div class="form-card">
        
        <form method="POST" action="{% if colaborador %}{% url 'colaborador_editar' colaborador.id %}{% else %}{% url 'cadastro' %}{% endif %}">
            
            {% csrf_token %} 
            
            {% if form.non_field_errors %}
            <div class="alert alert-danger">
                <strong>Erro ao salvar:</strong>
                {{ form.non_field_errors }}
            </div>
            {% endif %}

            <div class="form-group">
                <label for="{{ form.nome_completo.id_for_label }}">Nome Completo <span class="required">*</span></label>
                {{ form.nome_completo }}
                {{ form.nome_completo.errors }}
            </div>

            <div class="form-group">
                <label for="{{ form.matricula.id_for_label }}">Matrícula <span class="required">*</span></label>
                {{ form.matricula }}
                {% if form.matricula.errors %}
                    <div class="alert alert-error" style="margin-top: 5px;">
                        {{ form.matricula.errors.as_text }}
                    </div>
                {% endif %}
            </div>

            <div class="form-group">
                <label for="{{ form.funcao.id_for_label }}">Função <span class="required">*</span></label>
                {{ form.funcao }}   
                <datalist id="lista-funcoes">
                    {% for funcao in sugestoes_funcoes %}
                        <option value="{{ funcao }}">
                    {% endfor %}
                </datalist>
                {{ form.funcao.errors }}
            </div>

            <div class="form-group">
                <label for="{{ form.status.id_for_label }}">Status <span class="required">*</span></label>
                {{ form.status }}
                {{ form.status.errors }}
            </div>

            <div class="form-actions">
                <button type="submit" class="btn-submit">
                    <svg class="icon"><use href="#icon-save"></use></svg>
                    {% if colaborador %}Salvar Alterações{% else %}Salvar Colaborador{% endif %}
                </button>
            </div>
        </form>
    </div>

    {% endblock %}